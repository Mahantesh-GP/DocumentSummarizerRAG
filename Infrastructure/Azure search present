   {
"AzureAISearch": {
"Url": "https://<your-search-url>
  ",
  "Key": "<your-search-key>
    ",
    "IndexName": "<your-index-name>
      "
      },
      "AzureOpenAI": {
      "Url": "https://<your-openai-url>
        ",
        "Key": "<your-openai-key>
          ",
          "EmbeddingDeploymentName": "<your-deployment-name>
            "
            }
            }

            using Microsoft.Extensions.Configuration;

            public class AzureSearchService
            {
            private readonly SearchIndexClient _indexClient;
            private readonly string _indexName;
            private readonly AzureOpenAITextEmbeddingGenerationService azureOpenAITextEmbeddingGenerationService;

            public AzureSearchService(IConfiguration configuration)
            {
            var searchConfig = configuration.GetSection("AzureAISearch");
            var openAIConfig = configuration.GetSection("AzureOpenAI");

            _indexClient = new SearchIndexClient(
            new Uri(searchConfig["Url"]),
            new AzureKeyCredential(searchConfig["Key"])
            );
            _indexName = searchConfig["IndexName"];

            azureOpenAITextEmbeddingGenerationService = new(
            deploymentName: openAIConfig["EmbeddingDeploymentName"],
            openAIConfig["Url"],
            openAIConfig["Key"]
            );
            }
            // ... rest of your code ...
            }

            builder.Services.AddSingleton<AzureSearchService>();
   
            