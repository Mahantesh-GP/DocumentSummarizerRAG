@inject HttpClient Http

<h3>File Upload</h3>
<InputFile OnChange="HandleFileSelected" multiple="false" />
<p>@statusMessage</p>

@code {
    private string statusMessage = "Select a file to upload.";

    private async Task HandleFileSelected(InputFileChangeEventArgs e)
    {
        var file = e.File;
        if (file == null)
        {
            statusMessage = "No file selected.";
            return;
        }

        var content = new MultipartFormDataContent();
        var stream = file.OpenReadStream(maxAllowedSize: 1024 * 1024 * 10); // 10MB limit
        var fileContent = new StreamContent(stream);
        content.Add(fileContent, "file", file.Name);

        var response = await Http.PostAsync("https://localhost:5001/api/upload", content);
        
        if (response.IsSuccessStatusCode)
        {
            statusMessage = "File uploaded successfully!";
        }
        else
        {
            statusMessage = $"Upload failed: {response.ReasonPhrase}";
        }
    }
}
